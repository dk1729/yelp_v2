{"ast":null,"code":"var _jsxFileName = \"/Users/darthvader/Documents/CMPE273/yelp_v2/frontend/src/components/Events/ShowEvents.js\";\nimport React, { Component } from 'react';\nimport InternalHeader from './InternalHeader';\nimport { fetchEvents, fetchRegisteredEvents } from '../../actions';\nimport { connect } from 'react-redux';\nimport { Form, Button, Card, Input } from 'semantic-ui-react';\nimport axios from 'axios';\nimport { Row, Col, Toast } from 'react-bootstrap';\nimport RegisteredEvents from './RegisteredEvents';\nimport { baseURL } from '../URLConfig';\n\nclass ShowEvents extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      searchTerm: \"\",\n      cards: [],\n      modalShow: false,\n      message: \"\",\n      show: false\n    };\n\n    this.handleModal = event => {\n      event.preventDefault();\n      this.setState({\n        modalShow: true\n      });\n    };\n\n    this.handleChange = event => {\n      console.log(event.target.value);\n      this.setState({\n        searchTerm: event.target.value\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      console.log(this.state);\n\n      if (this.state.searchTerm === \"\") {\n        this.setState({\n          cards: []\n        });\n      } else {\n        axios.defaults.withCredentials = true;\n        axios.get(`${baseURL}/searchEvents/` + this.state.searchTerm).then(response => {\n          console.log(\"Status Code : \", response.status);\n          console.log(response.data);\n          this.setState({\n            cards: response.data\n          });\n        }).catch(err => {\n          console.log(\"ERRR : \", err);\n        });\n      }\n    };\n\n    this.register = (user_id, event_id) => {\n      console.log(\"User id = \" + user_id);\n      console.log(\"Event id = \" + event_id);\n      axios.defaults.withCredentials = true;\n      axios.post(`${baseURL}/registerForEvent`, {\n        user_id,\n        event_id\n      }).then(response => {\n        console.log(\"Status Code : \", response.status);\n\n        if (response.status === 200) {\n          this.setState({\n            message: \"Registered\"\n          });\n          this.setState({\n            show: true\n          });\n          setTimeout(() => {\n            this.setState({\n              show: false\n            });\n          }, 1000);\n          window.location.reload(false);\n        } else {\n          this.setState({\n            message: \"Already Registered\"\n          });\n          this.setState({\n            show: true\n          });\n          setTimeout(() => {\n            this.setState({\n              show: false\n            });\n          }, 1000);\n        }\n      }).catch(err => {\n        this.setState({\n          message: \"Already Registered\"\n        });\n        this.setState({\n          show: true\n        });\n        setTimeout(() => {\n          this.setState({\n            show: false\n          });\n        }, 1000);\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.props.fetchRegisteredEvents(window.localStorage.getItem('id'));\n    this.props.fetchEvents();\n  }\n\n  render() {\n    let event_cards = null;\n    console.log(\"registered events\");\n    console.log(this.state.re);\n\n    if (this.state.cards.length > 0) {\n      event_cards = this.state.cards.map(event => {\n        return /*#__PURE__*/React.createElement(Card, {\n          className: \"shadow-sm p-3 mb-5 rounded\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Card.Content, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(Card.Header, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 15\n          }\n        }, event.event_name), /*#__PURE__*/React.createElement(Card.Meta, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }\n        }, event.event_hash), /*#__PURE__*/React.createElement(Card.Description, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }\n        }, event.event_description)), /*#__PURE__*/React.createElement(Card.Content, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }\n        }, \"Event by: \", event.rest_name), /*#__PURE__*/React.createElement(Card.Content, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }\n        }, \"Event Date: \", event.event_date.substring(0, 10)), /*#__PURE__*/React.createElement(Card.Content, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }\n        }, event.event_location), /*#__PURE__*/React.createElement(Card.Content, {\n          extra: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          basic: true,\n          color: \"green\",\n          onClick: () => this.register(window.localStorage.getItem('id'), event.event_id),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 17\n          }\n        }, \"Register\")));\n      });\n    } else if (this.props.events.events.length !== undefined) {\n      event_cards = this.props.events.events.map(event => {\n        return /*#__PURE__*/React.createElement(Card, {\n          className: \"shadow-sm p-3 mb-5 rounded\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Card.Content, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(Card.Header, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 15\n          }\n        }, event.event_name), /*#__PURE__*/React.createElement(Card.Meta, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 15\n          }\n        }, event.event_hash), /*#__PURE__*/React.createElement(Card.Description, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 15\n          }\n        }, event.event_description)), /*#__PURE__*/React.createElement(Card.Content, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }\n        }, \"Event by: \", event.rest_name), /*#__PURE__*/React.createElement(Card.Content, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }\n        }, \"Event Date: \", event.event_date.substring(0, 10)), /*#__PURE__*/React.createElement(Card.Content, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }\n        }, event.event_location), /*#__PURE__*/React.createElement(Card.Content, {\n          extra: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          basic: true,\n          color: \"green\",\n          onClick: () => this.register(window.localStorage.getItem('id'), event.event_id),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 17\n          }\n        }, \"Register\")));\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(InternalHeader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Row, {\n      style: {\n        marginTop: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Toast, {\n      onClose: () => this.setState({\n        show: true\n      }),\n      show: this.state.show,\n      style: {\n        position: 'absolute',\n        top: 120,\n        right: 10\n      },\n      autohide: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Toast.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 13\n      }\n    }, this.state.message)), /*#__PURE__*/React.createElement(Col, {\n      md: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      style: {\n        marginLeft: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      icon: \"calendar\",\n      iconPosition: \"left\",\n      value: this.state.searchTerm,\n      placeholder: \"Search events...\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 19\n      }\n    })))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      color: \"red\",\n      style: {\n        marginLeft: 20,\n        marginTop: 10\n      },\n      onClick: this.handleModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }\n    }, \"View Registered Events\"), /*#__PURE__*/React.createElement(RegisteredEvents, {\n      show: this.state.modalShow,\n      onHide: () => this.setState({\n        modalShow: false\n      }),\n      events: this.props.registeredEvents.registeredEvents,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }\n    })))), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Card.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 13\n      }\n    }, event_cards))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    registeredEvents: state.registeredEvents,\n    events: state.events,\n    isSignedIn: state.auth.isSignedIn\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchEvents,\n  fetchRegisteredEvents\n})(ShowEvents);","map":{"version":3,"sources":["/Users/darthvader/Documents/CMPE273/yelp_v2/frontend/src/components/Events/ShowEvents.js"],"names":["React","Component","InternalHeader","fetchEvents","fetchRegisteredEvents","connect","Form","Button","Card","Input","axios","Row","Col","Toast","RegisteredEvents","baseURL","ShowEvents","state","searchTerm","cards","modalShow","message","show","handleModal","event","preventDefault","setState","handleChange","console","log","target","value","handleSubmit","defaults","withCredentials","get","then","response","status","data","catch","err","register","user_id","event_id","post","setTimeout","window","location","reload","componentDidMount","props","localStorage","getItem","render","event_cards","re","length","map","event_name","event_hash","event_description","rest_name","event_date","substring","event_location","events","undefined","marginTop","position","top","right","marginLeft","registeredEvents","mapStateToProps","isSignedIn","auth"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport InternalHeader from './InternalHeader';\nimport {fetchEvents, fetchRegisteredEvents} from '../../actions';\nimport {connect} from 'react-redux';\nimport {Form, Button, Card, Input } from 'semantic-ui-react';\nimport axios from 'axios';\nimport {Row,Col, Toast} from 'react-bootstrap';\nimport RegisteredEvents from './RegisteredEvents';\nimport { baseURL } from '../URLConfig';\n\nclass ShowEvents extends Component {\n  state = {searchTerm:\"\", cards:[], modalShow:false, message:\"\", show:false}\n\n  handleModal = event => {\n    event.preventDefault();\n    this.setState({modalShow:true})\n  }\n\n  componentDidMount(){\n    this.props.fetchRegisteredEvents(window.localStorage.getItem('id'));\n    this.props.fetchEvents();\n  }\n\n  handleChange = event => {\n    console.log(event.target.value);\n    this.setState({searchTerm:event.target.value})\n  }\n\n  handleSubmit = event => {\n    event.preventDefault();\n    console.log(this.state)\n\n    if(this.state.searchTerm === \"\"){\n      this.setState({cards:[]})\n    }\n    else{\n      axios.defaults.withCredentials = true;\n      axios.get(`${baseURL}/searchEvents/`+this.state.searchTerm)\n          .then(response => {\n              console.log(\"Status Code : \",response.status);            \n              console.log(response.data)\n              this.setState({cards:response.data})\n          }).catch((err)=>{\n            console.log(\"ERRR : \",err)\n          });\n    }    \n  }\n\n  register = (user_id, event_id) => {\n    console.log(\"User id = \"+user_id)\n    console.log(\"Event id = \"+event_id)\n\n    axios.defaults.withCredentials = true;\n    axios.post(`${baseURL}/registerForEvent`,{user_id, event_id})\n        .then(response => {\n            console.log(\"Status Code : \",response.status);            \n            if(response.status === 200){\n              this.setState({message:\"Registered\"})\n              this.setState({show:true})\n              setTimeout(()=>{\n                this.setState({show:false})\n              },1000)\n              window.location.reload(false)\n            }\n            else{\n              this.setState({message:\"Already Registered\"})\n              this.setState({show:true})\n              setTimeout(()=>{\n                this.setState({show:false})\n              },1000)\n            }\n        }).catch((err)=>{          \n          this.setState({message:\"Already Registered\"})\n          this.setState({show:true})\n          setTimeout(()=>{\n            this.setState({show:false})\n          },1000)\n        });\n  }\n  render() {\n    let event_cards = null;\n    console.log(\"registered events\")\n    console.log(this.state.re)\n    if(this.state.cards.length>0){\n      event_cards = this.state.cards.map(event => {\n        return (\n          <Card className=\"shadow-sm p-3 mb-5 rounded\">\n            <Card.Content>\n              <Card.Header>{event.event_name}</Card.Header>\n              <Card.Meta>{event.event_hash}</Card.Meta>\n              <Card.Description>\n                {event.event_description}\n              </Card.Description>\n            </Card.Content>\n            <Card.Content>\n              Event by: {event.rest_name}\n            </Card.Content>\n            <Card.Content>\n              Event Date: {event.event_date.substring(0,10)}\n            </Card.Content>\n            <Card.Content>\n              {event.event_location}\n            </Card.Content>\n            <Card.Content extra>\n                <Button basic color='green' onClick={() => this.register(window.localStorage.getItem('id'), event.event_id)}>\n                  Register\n                </Button>\n            </Card.Content>\n          </Card>\n        )        \n      })\n    }\n    else if(this.props.events.events.length!==undefined){\n      event_cards = this.props.events.events.map(event => {\n        return (\n          <Card className=\"shadow-sm p-3 mb-5 rounded\">\n            <Card.Content>\n              <Card.Header>{event.event_name}</Card.Header>\n              <Card.Meta>{event.event_hash}</Card.Meta>\n              <Card.Description>\n                {event.event_description}\n              </Card.Description>\n            </Card.Content>\n            <Card.Content>\n              Event by: {event.rest_name}\n            </Card.Content>\n            <Card.Content>\n              Event Date: {event.event_date.substring(0,10)}\n            </Card.Content>\n            <Card.Content>\n              {event.event_location}\n            </Card.Content>\n            <Card.Content extra>\n                <Button basic color='green' onClick={() => this.register(window.localStorage.getItem('id'), event.event_id)}>\n                  Register\n                </Button>\n            </Card.Content>\n          </Card>\n        )        \n      })\n    }\n    return (      \n      <div>\n        <InternalHeader/>\n        <Row style={{marginTop:20}}>\n          <Toast onClose={() => this.setState({show:true})} show={this.state.show} style={{position: 'absolute',top: 120,right: 10}}autohide>\n            <Toast.Header>{this.state.message}</Toast.Header>\n          </Toast>\n          <Col md={2}>\n            <Row>\n              <Col>\n                <Form onSubmit={this.handleSubmit}  style={{marginLeft:20}}>\n                  <Input icon='calendar' iconPosition='left' value={this.state.searchTerm} placeholder='Search events...' onChange={this.handleChange}/>\n                </Form>\n              </Col>  \n            </Row>\n            <Row>\n              <Col>\n                <Button color=\"red\" style={{marginLeft:20, marginTop:10}} onClick = {this.handleModal}>View Registered Events</Button>\n                <RegisteredEvents show={this.state.modalShow} onHide={()=>this.setState({modalShow:false})} events={this.props.registeredEvents.registeredEvents}/>\n              </Col>\n            </Row>                        \n          </Col>\n          <Col>\n            <Card.Group>\n              {event_cards}  \n            </Card.Group>\n          </Col>\n        </Row>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) =>{\n  return {registeredEvents:state.registeredEvents, events:state.events, isSignedIn:state.auth.isSignedIn}\n}\n\nexport default connect(mapStateToProps,{fetchEvents, fetchRegisteredEvents})(ShowEvents);"]},"metadata":{},"sourceType":"module"}