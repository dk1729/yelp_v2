{"ast":null,"code":"var _jsxFileName = \"/Users/darthvader/Documents/CMPE273/yelp_v2/frontend/src/components/UserPages/cart.js\";\nimport React, { Component } from 'react';\nimport InternalHeader from './InternalHeader';\nimport { Redirect } from 'react-router';\nimport { connect } from 'react-redux';\nimport { fetchCart } from '../../actions';\nimport { Row, Col, Card, Toast } from 'react-bootstrap';\nimport { Button } from 'semantic-ui-react';\nimport axios from 'axios';\nimport { Form, Field, reduxForm } from 'redux-form';\nimport { baseURL } from '../../URLConfig';\n\nclass cart extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      message: \"\",\n      show: false\n    };\n\n    this.onSubmit = formValues => {\n      console.log(\"Submitted\");\n      console.log(\"Form values = \" + JSON.stringify(formValues));\n      let total = 0;\n      this.props.cart.cart.map(dish => {\n        total += dish.dish_price * dish.quantity;\n      });\n      console.log(\"Total = \" + total); // console.log(\"Formvalues = \"+JSON.stringify({...formValues, ...this.props.cart.cart}))\n\n      axios.defaults.withCredentials = true;\n      axios.post(`${baseURL}/placeOrder`, { ...formValues,\n        total,\n        orders: this.props.cart.cart\n      }).then(response => {\n        console.log(\"Status Code : \", response.status);\n        console.log(response);\n\n        if (response.status === 200) {\n          this.props.fetchCart(window.localStorage.getItem('id'));\n          console.log(\"Order placed\");\n          this.setState({\n            show: true,\n            message: \"Order Placed\"\n          });\n          setTimeout(() => {\n            this.setState({\n              show: false\n            });\n          }, 1000);\n          console.log(\"Timeout set\");\n        }\n      }).catch(() => {\n        console.log(\"ERRR\");\n        this.setState({\n          message: \"Some error occured\"\n        });\n        setTimeout(() => {\n          this.setState({\n            show: false\n          });\n        }, 1000);\n      });\n    };\n  }\n\n  renderInput({\n    input,\n    label,\n    type\n  }) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"two fields\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 16,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 9\n      }\n    }, label), \" \", /*#__PURE__*/React.createElement(\"input\", Object.assign({}, input, {\n      type: type,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 32\n      }\n    })));\n  }\n\n  componentDidMount() {\n    this.props.fetchCart(window.localStorage.getItem('id'));\n    console.log(this.props);\n  }\n\n  handleClick(cart_id) {\n    console.log(\"I will delete \" + cart_id);\n    axios.defaults.withCredentials = true;\n    axios.post(`${baseURL}/deleteCart`, {\n      cart_id\n    }).then(response => {\n      console.log(\"Status Code : \", response.status);\n      console.log(response);\n\n      if (response.status === 200) {\n        console.log(\"Added to cart\");\n      }\n\n      console.log(\"I will force update\");\n      this.props.fetchCart(window.localStorage.getItem('id'));\n    }).catch(() => {\n      console.log(\"ERRR\");\n    });\n  }\n\n  render() {\n    let dishInfo = null;\n    let takeout = null;\n    let delivery = null;\n    let total = 0;\n\n    if (this.props.cart.cart.length !== undefined) {\n      if (this.props.cart.cart[0].takeout === \"true\") {\n        takeout = /*#__PURE__*/React.createElement(Col, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(Field, {\n          type: \"radio\",\n          value: \"takeout\",\n          label: \"Takeout\",\n          name: \"mode\",\n          component: this.renderInput,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 24\n          }\n        }));\n      }\n\n      if (this.props.cart.cart[0].delivery === \"true\") {\n        delivery = /*#__PURE__*/React.createElement(Col, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 20\n          }\n        }, /*#__PURE__*/React.createElement(Field, {\n          type: \"radio\",\n          value: \"delivery\",\n          name: \"mode\",\n          label: \"Delivery\",\n          component: this.renderInput,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 25\n          }\n        }));\n      }\n\n      dishInfo = this.props.cart.cart.map(dish => {\n        total += dish.dish_price * dish.quantity;\n        console.log(dish);\n        return /*#__PURE__*/React.createElement(Card, {\n          bg: \"white\",\n          className: \"shadow p-3 mb-5 rounded\",\n          key: dish.cart_id,\n          style: {\n            width: \"800px\",\n            marginLeft: 50,\n            marginTop: 20,\n            height: \"200px\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Card.Body, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            width: \"150px\",\n            height: \"150px\",\n            float: \"left\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          alt: \"Profile Photo\",\n          src: `${baseURL}/${dish.dish_path}`,\n          style: {\n            width: \"150px\",\n            height: \"150px\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 71\n          }\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(Card.Title, {\n          style: {\n            marginLeft: \"30%\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }\n        }, dish.dish_name), /*#__PURE__*/React.createElement(Card.Text, {\n          style: {\n            marginLeft: \"30%\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(Row, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(Col, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 22\n          }\n        }, \"Offered by: \", dish.rest_name)), /*#__PURE__*/React.createElement(Row, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(Col, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 22\n          }\n        }, \"$$: \", dish.dish_price)), /*#__PURE__*/React.createElement(Row, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(Col, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 22\n          }\n        }, \"Quantity: \", dish.quantity)), /*#__PURE__*/React.createElement(Row, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(Col, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 22\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          style: {\n            marginTop: 10\n          },\n          onClick: () => this.handleClick(dish.cart_id),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 27\n          }\n        }, \"Remove from Cart\")))))));\n      });\n    }\n\n    let redirectVar = null;\n\n    if (!window.localStorage.getItem('isSignedIn')) {\n      redirectVar = /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/login/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 7\n      }\n    }, redirectVar, /*#__PURE__*/React.createElement(InternalHeader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Toast, {\n      onClose: () => this.setState({\n        show: false\n      }),\n      show: this.state.show,\n      style: {\n        position: 'absolute',\n        top: 120,\n        right: 10\n      },\n      autohide: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Toast.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }\n    }, this.state.message)), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }\n    }, dishInfo ? dishInfo : \"Cart is empty\"), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      style: {\n        marginTop: 50,\n        fontWeight: 1000,\n        fontSize: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 18\n      }\n    }, dishInfo ? `Total = ${total}` : \"\")), /*#__PURE__*/React.createElement(Row, {\n      style: {\n        marginTop: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.props.handleSubmit(this.onSubmit),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 15\n      }\n    }, takeout, delivery, dishInfo ? /*#__PURE__*/React.createElement(Button, {\n      style: {\n        marginTop: 10,\n        marginLeft: 13,\n        backgroundColor: \"#d32323\",\n        color: \"white\"\n      },\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 27\n      }\n    }, \"Place order\") : \"\")))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    cart: state.cart,\n    isSignedIn: state.auth.isSignedIn\n  };\n};\n\nexport default reduxForm({\n  form: 'radio'\n})(connect(mapStateToProps, {\n  fetchCart\n})(cart));","map":{"version":3,"sources":["/Users/darthvader/Documents/CMPE273/yelp_v2/frontend/src/components/UserPages/cart.js"],"names":["React","Component","InternalHeader","Redirect","connect","fetchCart","Row","Col","Card","Toast","Button","axios","Form","Field","reduxForm","baseURL","cart","state","message","show","onSubmit","formValues","console","log","JSON","stringify","total","props","map","dish","dish_price","quantity","defaults","withCredentials","post","orders","then","response","status","window","localStorage","getItem","setState","setTimeout","catch","renderInput","input","label","type","componentDidMount","handleClick","cart_id","render","dishInfo","takeout","delivery","length","undefined","width","marginLeft","marginTop","height","float","dish_path","dish_name","rest_name","redirectVar","position","top","right","fontWeight","fontSize","handleSubmit","backgroundColor","color","mapStateToProps","isSignedIn","auth","form"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,SAAQC,QAAR,QAAuB,cAAvB;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAAQC,SAAR,QAAwB,eAAxB;AACA,SAAQC,GAAR,EAAaC,GAAb,EAAkBC,IAAlB,EAAwBC,KAAxB,QAAoC,iBAApC;AACA,SAAQC,MAAR,QAAqB,mBAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,IAAR,EAAcC,KAAd,EAAqBC,SAArB,QAAqC,YAArC;AACA,SAAQC,OAAR,QAAsB,iBAAtB;;AAEA,MAAMC,IAAN,SAAmBf,SAAnB,CAA6B;AAAA;AAAA;AAAA,SAC3BgB,KAD2B,GACnB;AAACC,MAAAA,OAAO,EAAC,EAAT;AAAaC,MAAAA,IAAI,EAAC;AAAlB,KADmB;;AAAA,SAiC3BC,QAjC2B,GAiChBC,UAAU,IAAI;AACvBC,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAiBC,IAAI,CAACC,SAAL,CAAeJ,UAAf,CAA7B;AACA,UAAIK,KAAK,GAAG,CAAZ;AACA,WAAKC,KAAL,CAAWX,IAAX,CAAgBA,IAAhB,CAAqBY,GAArB,CAAyBC,IAAI,IAAI;AAC/BH,QAAAA,KAAK,IAAEG,IAAI,CAACC,UAAL,GAAgBD,IAAI,CAACE,QAA5B;AACD,OAFD;AAGAT,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAWG,KAAvB,EAPuB,CAQvB;;AACAf,MAAAA,KAAK,CAACqB,QAAN,CAAeC,eAAf,GAAiC,IAAjC;AACAtB,MAAAA,KAAK,CAACuB,IAAN,CAAY,GAAEnB,OAAQ,aAAtB,EAAmC,EAAC,GAAGM,UAAJ;AAAgBK,QAAAA,KAAhB;AAAuBS,QAAAA,MAAM,EAAC,KAAKR,KAAL,CAAWX,IAAX,CAAgBA;AAA9C,OAAnC,EACKoB,IADL,CACUC,QAAQ,IAAI;AACdf,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA6Bc,QAAQ,CAACC,MAAtC;AACAhB,QAAAA,OAAO,CAACC,GAAR,CAAYc,QAAZ;;AACA,YAAGA,QAAQ,CAACC,MAAT,KAAoB,GAAvB,EAA2B;AACzB,eAAKX,KAAL,CAAWtB,SAAX,CAAqBkC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,IAA5B,CAArB;AACAnB,UAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACA,eAAKmB,QAAL,CAAc;AAACvB,YAAAA,IAAI,EAAC,IAAN;AAAYD,YAAAA,OAAO,EAAC;AAApB,WAAd;AACAyB,UAAAA,UAAU,CAAC,MAAI;AACb,iBAAKD,QAAL,CAAc;AAACvB,cAAAA,IAAI,EAAC;AAAN,aAAd;AACD,WAFS,EAER,IAFQ,CAAV;AAGAG,UAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACD;AACJ,OAbL,EAaOqB,KAbP,CAaa,MAAI;AACXtB,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,aAAKmB,QAAL,CAAc;AAACxB,UAAAA,OAAO,EAAC;AAAT,SAAd;AACAyB,QAAAA,UAAU,CAAC,MAAI;AACb,eAAKD,QAAL,CAAc;AAACvB,YAAAA,IAAI,EAAC;AAAN,WAAd;AACD,SAFS,EAER,IAFQ,CAAV;AAGD,OAnBL;AAoBD,KA/D0B;AAAA;;AAE3B0B,EAAAA,WAAW,CAAC;AAACC,IAAAA,KAAD;AAAQC,IAAAA,KAAR;AAAeC,IAAAA;AAAf,GAAD,EAAsB;AAC/B,wBACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAQD,KAAR,CADF,oBACyB,+CAAWD,KAAX;AAAkB,MAAA,IAAI,EAAEE,IAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADzB,CADF;AAKD;;AAEDC,EAAAA,iBAAiB,GAAE;AACjB,SAAKtB,KAAL,CAAWtB,SAAX,CAAqBkC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,IAA5B,CAArB;AACAnB,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKI,KAAjB;AACD;;AAEDuB,EAAAA,WAAW,CAACC,OAAD,EAAS;AAClB7B,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAiB4B,OAA7B;AACAxC,IAAAA,KAAK,CAACqB,QAAN,CAAeC,eAAf,GAAiC,IAAjC;AACAtB,IAAAA,KAAK,CAACuB,IAAN,CAAY,GAAEnB,OAAQ,aAAtB,EAAoC;AAACoC,MAAAA;AAAD,KAApC,EACKf,IADL,CACUC,QAAQ,IAAI;AACdf,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA6Bc,QAAQ,CAACC,MAAtC;AACAhB,MAAAA,OAAO,CAACC,GAAR,CAAYc,QAAZ;;AACA,UAAGA,QAAQ,CAACC,MAAT,KAAoB,GAAvB,EAA2B;AACzBhB,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACD;;AACDD,MAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACA,WAAKI,KAAL,CAAWtB,SAAX,CAAqBkC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,IAA5B,CAArB;AACH,KATL,EASOG,KATP,CASa,MAAI;AACXtB,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACD,KAXL;AAYD;;AAmCD6B,EAAAA,MAAM,GAAG;AACP,QAAIC,QAAQ,GAAG,IAAf;AACA,QAAIC,OAAO,GAAG,IAAd;AACA,QAAIC,QAAQ,GAAG,IAAf;AACA,QAAI7B,KAAK,GAAG,CAAZ;;AACA,QAAG,KAAKC,KAAL,CAAWX,IAAX,CAAgBA,IAAhB,CAAqBwC,MAArB,KAAgCC,SAAnC,EAA6C;AAE3C,UAAG,KAAK9B,KAAL,CAAWX,IAAX,CAAgBA,IAAhB,CAAqB,CAArB,EAAwBsC,OAAxB,KAAoC,MAAvC,EAA8C;AAC5CA,QAAAA,OAAO,gBAAG,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAK,oBAAC,KAAD;AAAO,UAAA,IAAI,EAAC,OAAZ;AAAoB,UAAA,KAAK,EAAC,SAA1B;AAAoC,UAAA,KAAK,EAAC,SAA1C;AAAoD,UAAA,IAAI,EAAC,MAAzD;AAAgE,UAAA,SAAS,EAAE,KAAKT,WAAhF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAL,CAAV;AACD;;AAED,UAAG,KAAKlB,KAAL,CAAWX,IAAX,CAAgBA,IAAhB,CAAqB,CAArB,EAAwBuC,QAAxB,KAAqC,MAAxC,EAA+C;AAC7CA,QAAAA,QAAQ,gBAAG,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAK,oBAAC,KAAD;AAAO,UAAA,IAAI,EAAC,OAAZ;AAAoB,UAAA,KAAK,EAAC,UAA1B;AAAqC,UAAA,IAAI,EAAC,MAA1C;AAAiD,UAAA,KAAK,EAAC,UAAvD;AAAkE,UAAA,SAAS,EAAE,KAAKV,WAAlF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAL,CAAX;AACD;;AAEDQ,MAAAA,QAAQ,GAAG,KAAK1B,KAAL,CAAWX,IAAX,CAAgBA,IAAhB,CAAqBY,GAArB,CAAyBC,IAAI,IAAI;AAC1CH,QAAAA,KAAK,IAAIG,IAAI,CAACC,UAAL,GAAgBD,IAAI,CAACE,QAA9B;AACAT,QAAAA,OAAO,CAACC,GAAR,CAAYM,IAAZ;AACA,4BACE,oBAAC,IAAD;AAAM,UAAA,EAAE,EAAC,OAAT;AAAiB,UAAA,SAAS,EAAC,yBAA3B;AAAqD,UAAA,GAAG,EAAEA,IAAI,CAACsB,OAA/D;AAAwE,UAAA,KAAK,EAAE;AAACO,YAAAA,KAAK,EAAC,OAAP;AAAeC,YAAAA,UAAU,EAAC,EAA1B;AAA8BC,YAAAA,SAAS,EAAC,EAAxC;AAA4CC,YAAAA,MAAM,EAAC;AAAnD,WAA/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACA;AAAK,UAAA,KAAK,EAAE;AAACH,YAAAA,KAAK,EAAC,OAAP;AAAeG,YAAAA,MAAM,EAAC,OAAtB;AAA+BC,YAAAA,KAAK,EAAC;AAArC,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAA0D;AAAK,UAAA,GAAG,EAAC,eAAT;AAAyB,UAAA,GAAG,EAAG,GAAE/C,OAAQ,IAAGc,IAAI,CAACkC,SAAU,EAA3D;AAA8D,UAAA,KAAK,EAAE;AAACL,YAAAA,KAAK,EAAC,OAAP;AAAeG,YAAAA,MAAM,EAAC;AAAtB,WAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAA1D,CADA,eAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE,oBAAC,IAAD,CAAM,KAAN;AAAY,UAAA,KAAK,EAAE;AAACF,YAAAA,UAAU,EAAC;AAAZ,WAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAwC9B,IAAI,CAACmC,SAA7C,CADF,eAEE,oBAAC,IAAD,CAAM,IAAN;AAAW,UAAA,KAAK,EAAE;AAACL,YAAAA,UAAU,EAAC;AAAZ,WAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAK,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAkB9B,IAAI,CAACoC,SAAvB,CAAL,CADF,eAEE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAK,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAUpC,IAAI,CAACC,UAAf,CAAL,CAFF,eAGE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAK,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAgBD,IAAI,CAACE,QAArB,CAAL,CAHF,eAIE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAK,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAK,oBAAC,MAAD;AAAQ,UAAA,KAAK,EAAE;AAAC6B,YAAAA,SAAS,EAAC;AAAX,WAAf;AAA+B,UAAA,OAAO,EAAE,MAAI,KAAKV,WAAL,CAAiBrB,IAAI,CAACsB,OAAtB,CAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAL,CAAL,CAJF,CAFF,CAFA,CADF,CADF;AAgBD,OAnBU,CAAX;AAoBD;;AAED,QAAIe,WAAW,GAAG,IAAlB;;AACA,QAAG,CAAC3B,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,YAA5B,CAAJ,EAA8C;AAC5CyB,MAAAA,WAAW,gBAAG,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAE,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAd;AACD;;AACD,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGA,WADH,eAEE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,eAGE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,KAAD;AAAO,MAAA,OAAO,EAAE,MAAM,KAAKxB,QAAL,CAAc;AAACvB,QAAAA,IAAI,EAAC;AAAN,OAAd,CAAtB;AAAmD,MAAA,IAAI,EAAE,KAAKF,KAAL,CAAWE,IAApE;AAA0E,MAAA,KAAK,EAAE;AAACgD,QAAAA,QAAQ,EAAE,UAAX;AAAsBC,QAAAA,GAAG,EAAE,GAA3B;AAA+BC,QAAAA,KAAK,EAAE;AAAtC,OAAjF;AAA4H,MAAA,QAAQ,MAApI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAe,KAAKpD,KAAL,CAAWC,OAA1B,CADF,CADF,eAIE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGmC,QAAQ,GAACA,QAAD,GAAU,eADrB,CAJF,eAOE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAK,oBAAC,GAAD;AAAK,MAAA,KAAK,EAAE;AAACO,QAAAA,SAAS,EAAC,EAAX;AAAeU,QAAAA,UAAU,EAAC,IAA1B;AAAgCC,QAAAA,QAAQ,EAAC;AAAzC,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA2DlB,QAAQ,GAAE,WAAU3B,KAAM,EAAlB,GAAoB,EAAvF,CAAL,CADF,eAEE,oBAAC,GAAD;AAAK,MAAA,KAAK,EAAE;AAACkC,QAAAA,SAAS,EAAC;AAAX,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,IAAD;AAAM,MAAA,QAAQ,EAAE,KAAKjC,KAAL,CAAW6C,YAAX,CAAwB,KAAKpD,QAA7B,CAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGkC,OADH,EAEGC,QAFH,EAGGF,QAAQ,gBAAC,oBAAC,MAAD;AAAQ,MAAA,KAAK,EAAE;AAACO,QAAAA,SAAS,EAAC,EAAX;AAAeD,QAAAA,UAAU,EAAC,EAA1B;AAA8Bc,QAAAA,eAAe,EAAC,SAA9C;AAAyDC,QAAAA,KAAK,EAAC;AAA/D,OAAf;AAAwF,MAAA,IAAI,EAAC,QAA7F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAD,GAA4H,EAHvI,CADF,CAFF,CAPF,CAHF,CADF;AAwBD;;AAlI0B;;AAqI7B,MAAMC,eAAe,GAAI1D,KAAD,IAAW;AACjC,SAAO;AAACD,IAAAA,IAAI,EAACC,KAAK,CAACD,IAAZ;AAAkB4D,IAAAA,UAAU,EAAC3D,KAAK,CAAC4D,IAAN,CAAWD;AAAxC,GAAP;AACD,CAFD;;AAIA,eAAe9D,SAAS,CAAC;AAACgE,EAAAA,IAAI,EAAC;AAAN,CAAD,CAAT,CAA0B1E,OAAO,CAACuE,eAAD,EAAiB;AAACtE,EAAAA;AAAD,CAAjB,CAAP,CAAqCW,IAArC,CAA1B,CAAf","sourcesContent":["import React, { Component } from 'react'\nimport InternalHeader from './InternalHeader';\nimport {Redirect} from 'react-router';\nimport {connect} from 'react-redux';\nimport {fetchCart} from '../../actions';\nimport {Row, Col, Card, Toast} from 'react-bootstrap';\nimport {Button} from 'semantic-ui-react';\nimport axios from 'axios';\nimport {Form, Field, reduxForm} from 'redux-form';\nimport {baseURL} from '../../URLConfig';\n\nclass cart extends Component {\n  state = {message:\"\", show:false}\n  renderInput({input, label, type}){\n    return (\n      <div className=\"two fields\">        \n        <label>{label}</label> <input {...input} type={type}/>\n      </div>\n    );\n  }\n\n  componentDidMount(){    \n    this.props.fetchCart(window.localStorage.getItem('id'));\n    console.log(this.props)\n  }\n  \n  handleClick(cart_id){    \n    console.log(\"I will delete \"+cart_id)\n    axios.defaults.withCredentials = true;\n    axios.post(`${baseURL}/deleteCart`, {cart_id})\n        .then(response => {\n            console.log(\"Status Code : \",response.status);\n            console.log(response)            \n            if(response.status === 200){\n              console.log(\"Added to cart\")\n            } \n            console.log(\"I will force update\")\n            this.props.fetchCart(window.localStorage.getItem('id'));\n        }).catch(()=>{\n          console.log(\"ERRR\")\n        });\n  }\n\n\n  onSubmit = formValues => {  \n    console.log(\"Submitted\")\n    console.log(\"Form values = \"+JSON.stringify(formValues))\n    let total = 0;\n    this.props.cart.cart.map(dish => {\n      total+=dish.dish_price*dish.quantity\n    })\n    console.log(\"Total = \"+total)\n    // console.log(\"Formvalues = \"+JSON.stringify({...formValues, ...this.props.cart.cart}))\n    axios.defaults.withCredentials = true;\n    axios.post(`${baseURL}/placeOrder`,{...formValues, total, orders:this.props.cart.cart})\n        .then(response => {\n            console.log(\"Status Code : \",response.status);\n            console.log(response)            \n            if(response.status === 200){\n              this.props.fetchCart(window.localStorage.getItem('id'));\n              console.log(\"Order placed\")\n              this.setState({show:true, message:\"Order Placed\"})\n              setTimeout(()=>{\n                this.setState({show:false})\n              },1000)\n              console.log(\"Timeout set\")\n            } \n        }).catch(()=>{\n          console.log(\"ERRR\")\n          this.setState({message:\"Some error occured\"})\n          setTimeout(()=>{\n            this.setState({show:false})\n          },1000)\n        });\n  }\n\n  render() {    \n    let dishInfo = null;        \n    let takeout = null;\n    let delivery = null;\n    let total = 0;    \n    if(this.props.cart.cart.length !== undefined){      \n\n      if(this.props.cart.cart[0].takeout === \"true\"){\n        takeout = <Col><Field type=\"radio\" value=\"takeout\" label=\"Takeout\" name=\"mode\" component={this.renderInput}/></Col>\n      }      \n\n      if(this.props.cart.cart[0].delivery === \"true\"){\n        delivery = <Col><Field type=\"radio\" value=\"delivery\" name=\"mode\" label=\"Delivery\" component={this.renderInput}/></Col>        \n      }      \n\n      dishInfo = this.props.cart.cart.map(dish => {\n        total += dish.dish_price*dish.quantity\n        console.log(dish)\n        return (\n          <Card bg=\"white\" className=\"shadow p-3 mb-5 rounded\" key={dish.cart_id} style={{width:\"800px\",marginLeft:50, marginTop:20, height:\"200px\"}}>\n            <Card.Body>\n            <div style={{width:\"150px\",height:\"150px\", float:\"left\"}}><img alt=\"Profile Photo\" src={`${baseURL}/${dish.dish_path}`} style={{width:\"150px\",height:\"150px\"}}></img></div>\n            <div>\n              <Card.Title style={{marginLeft:\"30%\"}}>{dish.dish_name}</Card.Title>\n              <Card.Text style={{marginLeft:\"30%\"}}>\n                <Row><Col>Offered by: {dish.rest_name}</Col></Row>\n                <Row><Col>$$: {dish.dish_price}</Col></Row>\n                <Row><Col>Quantity: {dish.quantity}</Col></Row>\n                <Row><Col><Button style={{marginTop:10}} onClick={()=>this.handleClick(dish.cart_id)}>Remove from Cart</Button></Col></Row>\n              </Card.Text>\n            </div>\n            </Card.Body>\n          </Card>\n        )        \n      })\n    }\n\n    let redirectVar = null;\n    if(!window.localStorage.getItem('isSignedIn')){\n      redirectVar = <Redirect to= \"/login/\"/>\n    }\n    return (\n      <div>\n        {redirectVar}\n        <InternalHeader/>\n        <Row>\n          <Toast onClose={() => this.setState({show:false})} show={this.state.show} style={{position: 'absolute',top: 120,right: 10}} autohide>\n            <Toast.Header>{this.state.message}</Toast.Header>\n          </Toast>\n          <Col>\n            {dishInfo?dishInfo:\"Cart is empty\"}\n          </Col>    \n          <Col>      \n            <Row><Col style={{marginTop:50, fontWeight:1000, fontSize:20}}>{dishInfo?`Total = ${total}`:\"\"}</Col></Row>\n            <Row style={{marginTop:10}}>\n              <Form onSubmit={this.props.handleSubmit(this.onSubmit)}>                \n                {takeout}\n                {delivery}\n                {dishInfo?<Button style={{marginTop:10, marginLeft:13, backgroundColor:\"#d32323\", color:\"white\"}} type=\"submit\">Place order</Button>:\"\"}\n              </Form>\n            </Row>\n          </Col>\n        </Row>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {cart:state.cart, isSignedIn:state.auth.isSignedIn}\n}\n\nexport default reduxForm({form:'radio'})(connect(mapStateToProps,{fetchCart})(cart));"]},"metadata":{},"sourceType":"module"}